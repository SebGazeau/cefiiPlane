<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.3/Chart.min.js"></script>
    <style type="text/css">
        .chart-container {
            position: relative;
            margin: auto;
            height: 40vh;
            width: 80vw;
        }

    </style>
</head>

<body>
    <div class="chart-container">
        <canvas id="chart"></canvas>
    </div>
    
    <script>
        var ctx = document.getElementById('chart').getContext('2d');
        var column = "take_off";
        var param = {
            // numéro de vol
            "id_flight": 3,
            // colonne à afficher (on_off, speed, take_off, altitude, fuel_level, crash)
            "column": column
        } 

        $.ajax({
                url: "../index.php?controller=blackBox&action=displayGraph",
                type: "POST",
                data: param,
                dataType: "json",
                success: function(response) {
                    chart(response, column);
                }
        });


        function chart(response, column) {
            var scatterChart = new Chart(ctx, {
                type: 'scatter',
                data: {
                    datasets: [{
                        aspectRatio: 1,
                        label: column,
                        responsive: false,
                        showLine: true,
                        lineTension: 0,
                        borderColor: "#5008D1",
                        data: response
                    }]
                },
                options: {
                    aspectRatio: 3,
                    scales: {
                        xAxes: [{
                            type: 'linear',
                            position: 'bottom',
                            scaleLabel: {
                                display: true,
                                labelString: 'time'
                            }
                        }],
                        yAxes: [{
                            scaleLabel: {
                                display: true,
                                labelString: column
                            }
                        }],
                    }
                }
            });
        }

    </script>
</body>

</html>
